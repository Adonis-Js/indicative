!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):n.indicative=r()}(this,function(){"use strict";function n(n,r){if("object"!=typeof n||"string"!=typeof r)return n;for(var t=r.split("."),e=0;e<t.length;e++){var i=t[e];if(null===(n=n.hasOwnProperty(i)?n[i]:null))break}return n}function r(n){this.fn=n,this._promise=null}function t(r,e,i,u){if(!e)return[];i=i||0;var o=r[i++],f=r[i];return u||(u=[o],o=""),u=u.reduce(function(r,t){var i=o?t+"."+o:t;if(void 0!==f){var u=n(e,i);if(Array.isArray(u))for(var a=u.length,c=0;c<a;c++)r.push(i+"."+c)}else r.push(i);return r},[]),i===r.length?u:t(r,e,i,u)}function e(r,t,e,i){var u=r[(t=t.replace(/\.\d/g,".*"))+"."+e]||r[e]||"{{validation}} validation failed on {{ field }}";return"function"==typeof u?u(t,e,i):function(r,t,e){e=e||{skipUndefined:!1,throwOnUndefined:!1};for(var i,u=/{{2}(.+?)}{2}/g,o=r;null!==(i=u.exec(r));){var f=i[1].trim();if(f){var a=n(t,f);if(void 0!==a&&null!==a)o=o.replace(i[0],a);else{if(e.throwOnUndefined){var c=new Error("Missing value for "+i[0]);throw c.key=f,c.code="E_MISSING_KEY",c}e.skipUndefined||(o=o.replace(i[0],""))}}}return o}(u,{field:t,validation:e,argument:i})}function i(){this.errors=[]}function u(t,i,u,o,f){return Object.keys(i).reduce(function(a,c){return i[c].map(function(i){a.push(function(t,i,u,o,f,a){var c=i.name,s=i.args;return new r(function(r,i){if("function"!=typeof t[c])throw new Error(c+" is not defined as a validation rule");var a=e(f,u,c,s);t[c](o,u,a,s,n).then(r).catch(i)}).catch(function(n){a.addError(n,u,c)})}(t,i,c,u,o,f))}),a},[])}function o(n,r,e,o,c,s){return s=s||new i,new Promise(function(i,d){c=c||{};var v=function(n,r){return r=r||{},Object.keys(n).reduce(function(e,i){var u=n[i];if("string"==typeof u)u=f(u,new a);else if(!Array.isArray(u))throw new Error("Rules must be defined as a string or an array");return i.includes("*")?t(i.split(/\.\*\.?/),r).forEach(function(n){e[n]=u}):e[i]=u,e},{})}(o);(function(n,r){function t(r,u){return r>=i?Promise.resolve(e):n[r].then(function(n){return e.push(function(n){return{fullFilled:!0,rejected:!1,value:n,reason:null}}(n)),t(r+1,u)}).catch(function(n){return e.push(function(n){return{fullFilled:!1,rejected:!0,value:null,reason:n}}(n)),u?Promise.resolve(e):t(r+1,u)})}var e=[],i=n.length;return t(0,r)})(u(n,v,e,c,s),r).then(function(n){var r=s.toJSON();if(r.length)return d(r);i(e)})})}r.prototype.then=function(n,r){return this._promise=this._promise||new Promise(this.fn),this._promise.then(n,r)},r.prototype.catch=function(n){return this._promise=this._promise||new Promise(this.fn),this._promise.catch(n)};var f=function(n,r){r.add();const t=n.length;let e=0,i="name";for(;e<t;){const t=n[e++],u=t.charCodeAt(0);58===u||44===u?(i="arg",r.shiftValue()):124===u?(i="name",r.add()):"arg"===i?r.appendValue(t):r.appendKey(t,u)}return r.toJSON()},a=function(){return{nodes:[],currentNode:null,add(){this.currentNode={name:"",args:[]},this.nodes.push(this.currentNode)},appendKey(n,r){32!==r&&(this.currentNode.name+=n)},appendValue(n){this.currentNode.args[this.currentNode.args.length-1]+=n},shiftValue(){this.currentNode.args.push("")},toJSON(){return this.nodes}}};i.prototype.addError=function(n,r,t){var e=n;n instanceof Error&&(t="ENGINE_EXCEPTION",e=n.message),this.errors.push({message:e,field:r,validation:t})},i.prototype.toJSON=function(){return this.errors};var c=function(n){return new Promise(function(r,t){var e=n();if(e)return t(e);r("validation passed")})},s=function(n){return"string"==typeof n?n.length>0:null!==n&&void 0!==n},d=function(n,r){return r?void 0===n:!s(n)},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l=function(){return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(n,r){var t=[],e=!0,i=!1,u=void 0;try{for(var o,f=n[Symbol.iterator]();!(e=(o=f.next()).done)&&(t.push(o.value),!r||t.length!==r);e=!0);}catch(n){i=!0,u=n}finally{try{!e&&f.return&&f.return()}finally{if(i)throw u}}return t}(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(n){return s(n)&&!1!==n&&0!==n},p=/^[a-z]+$/i,y=function(n){return p.test(n)},m=/^[a-z0-9]+$/i,g=function(n){return m.test(n)},b=function(n){return[!0,!1,0,1].indexOf(n)>-1},A=function(n,r){return n===r},w=/^([\w-]+(?:\.[\w-]+)*)(\+[\w.-]+)?@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,63}(?:\.[a-z]{2})?)$/i,N=function(n){return w.test(n)},O=function(n,r){return"function"==typeof r.indexOf&&r.indexOf(n)>-1},S=/^(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}$/,E=function(n){return S.test(n)},x=/^(?:(?:[0-9a-fA-F:]){1,4}(?:(?::(?:[0-9a-fA-F]){1,4}|:)){2,7})+$/,j=function(n){return x.test(n)},_=function(n){return E(n)||j(n)},k=function(n){try{return!!(JSON.parse(n)||{})}catch(n){return!1}},q=function(n){return"number"==typeof n},z=function(n){return n instanceof Object&&!Array.isArray(n)},I=function(n,r,t){return(n=Number(n))>Number(r)&&n<Number(t)},W=function(n){return!s(n)||!(n instanceof Date)&&("object"===(void 0===n?"undefined":v(n))&&0===Object.keys(n).length)},P=function(n){return"string"==typeof n},$=/https?:\/\/(www\.)?([-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}|localhost)\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i,F=function(n){return $.test(n)},J=Object.freeze({above:function(n,r,t,e,i){var u=l(e,1)[0];return c(function(){var e=i(n,r);if(!d(e))return Number(e)<=u?t:void 0})},accepted:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return h(e)?void 0:t})},alpha:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return y(e)?void 0:t})},alphaNumeric:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return g(e)?void 0:t})},array:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return Array.isArray(e)?void 0:t})},boolean:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return"0"===e?e=0:"1"===e&&(e=1),b(e)?void 0:t})},confirmed:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return A(e,i(n,r+"_confirmation"))?void 0:t})},different:function(n,r,t,e,i){return c(function(){var u=i(n,r);if(!d(u)){var o=i(n,e[0]);if(o)return o===u?t:void 0}})},email:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return N(e)?void 0:t})},endsWith:function(n,r,t,e,i){var u=l(e,1)[0];return c(function(){var e=i(n,r);if(!d(e))return String(e).endsWith(u)?void 0:t})},equals:function(n,r,t,e,i){var u=e[0];return c(function(){var e=i(n,r);if(!d(e))return u!=e?t:void 0})},in:function(n,r,t,e,i){return c(function(){var u=i(n,r);if(!d(u))return O(u,e)?void 0:t})},includes:function(n,r,t,e,i){var u=l(e,1)[0];return c(function(){var e=i(n,r);if(!d(e))return String(e).includes(u)?void 0:t})},integer:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return Number.isInteger(e)?void 0:t})},ip:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return _(e)?void 0:t})},ipv4:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return E(e)?void 0:t})},ipv6:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return j(e)?void 0:t})},json:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return k(e)?void 0:t})},max:function(n,r,t,e,i){var u=l(e,1)[0];return c(function(){var e=i(n,r);if(!d(e))return String(e).length>u?t:void 0})},min:function(n,r,t,e,i){var u=l(e,1)[0];return c(function(){var e=i(n,r);if(!d(e))return String(e).length<u?t:void 0})},notEquals:function(n,r,t,e,i){var u=e[0];return c(function(){var e=i(n,r);if(!d(e))return u==e?t:void 0})},notIn:function(n,r,t,e,i){return c(function(){var u=i(n,r);if(!d(u))return O(u,e)?t:void 0})},number:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return q(e)?void 0:t})},object:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return z(e)?void 0:t})},range:function(n,r,t,e,i){var u=l(e,2),o=u[0],f=u[1];return c(function(){if(!o||!f)return new Error("min and max values are required for range validation");var e=i(n,r);return d(e)?void 0:I(e,o,f)?void 0:t})},regex:function(n,r,t,e,i){var u=l(e,2),o=u[0],f=u[1];return c(function(){var e=i(n,r);if(!d(e))return(o instanceof RegExp?o:new RegExp(o,f)).test(e)?void 0:t})},required:function(n,r,t,e,i){return c(function(){if(W(i(n,r)))return t})},requiredIf:function(n,r,t,e,i){return c(function(){if(i(n,e[0]))return W(i(n,r))?t:void 0})},requiredWhen:function(n,r,t,e,i){var u=l(e,2),o=u[0],f=u[1];return c(function(){var e=i(n,o);if(e&&f===e)return W(i(n,r))?t:void 0})},requiredWithAll:function(n,r,t,e,i){return c(function(){var u=0;if(e.forEach(function(r){i(n,r)&&u++}),u===e.length&&W(i(n,r)))return t})},requiredWithAny:function(n,r,t,e,i){return c(function(){for(var u=!1,o=0;o<e.length;o++)if(i(n,e[o])){u=!0;break}if(u&&W(i(n,r)))return t})},requiredWithoutAll:function(n,r,t,e,i){return c(function(){var u=0;if(e.forEach(function(r){i(n,r)||u++}),u===e.length&&W(i(n,r)))return t})},requiredWithoutAny:function(n,r,t,e,i){return c(function(){for(var u=!1,o=0;o<e.length;o++)if(!i(n,e[o])){u=!0;break}if(u&&W(i(n,r)))return t})},same:function(n,r,t,e,i){return c(function(){var u=i(n,r);if(!d(u)){var o=i(n,e[0]);if(o)return o!==u?t:void 0}})},startsWith:function(n,r,t,e,i){var u=l(e,1)[0];return c(function(){var e=i(n,r);if(!d(e))return String(e).startsWith(u)?void 0:t})},string:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return P(e)?void 0:t})},under:function(n,r,t,e,i){var u=l(e,1)[0];return c(function(){var e=i(n,r);if(!d(e))return Number(e)>=u?t:void 0})},url:function(n,r,t,e,i){return c(function(){var e=i(n,r);if(!d(e))return F(e)?void 0:t})}}),C=function(n,r){return Number(n)>Number(r)},D=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$/,U=function(n){return Number(n)%2==0},V=function(n){return Number(n)>=0},K=/\b\d{3}[-.]?\d{3}[-.]?\d{4}\b/,R=Object.freeze({above:C,affirmative:function(n){return"A"===n||["yes","true","y","ok","okay"].indexOf(n.toLowerCase())>-1},alpha:y,alphaNumeric:g,array:function(n){return Array.isArray(n)},between:I,boolean:b,creditCard:function(n){return n=n.replace(/-/g,""),D.test(n)},date:function(n,r){return n instanceof Date==1||!r&&"Invalid Date"!==new Date(n).toString()},email:N,empty:W,even:U,existy:s,falsy:function(n){return!h(n)},inArray:O,intersectAll:function(n,r){return!(!Array.isArray(n)||!Array.isArray(r))&&n.filter(function(n){return r.indexOf(n)>-1}).length===n.length},intersectAny:function(n,r){return!(!Array.isArray(n)||!Array.isArray(r))&&n.filter(function(n){return r.indexOf(n)>-1}).length>0},ip:_,ipv4:E,ipv6:j,isFunction:function(n){return"function"==typeof n},json:k,negative:function(n){return!V(n)},isNull:function(n){return null===n},isNumber:q,isObject:z,odd:function(n){return!U(n)},phone:function(n){return K.test(n)},positive:V,regex:function(n,r){return r.test(n)},same:A,sameType:function(n,r){return(void 0===n?"undefined":v(n))===(void 0===r?"undefined":v(r))},sorted:function(n){if(!Array.isArray(n))return!1;for(var r=!1,t=0;t<n.length;){var e=n[t++],i=n[t-2];if(i&&i>e){r=!0;break}}return!r},isString:P,truthy:h,under:function(n,r){return!C(n,r)},url:F}),T=function(n){return{validate:function(r,t,e,i){return o(n,!0,r,t,e,i)},validateAll:function(r,t,e,i){return o(n,!1,r,t,e,i)}}}(J);return{validate:T.validate,validateAll:T.validateAll,is:R}});
